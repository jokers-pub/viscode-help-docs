## 组件/方法集发布

本章聚焦于如何开展组件库/方法集类型仓库的版本发布工作，以及怎样选择公开能力。

### 概述

在阅读本章内容前，建议先阅读以下两个章节：

-   [版本发布](/portal/rep-version)
-   [代码检查及版本发布](/workbench/check-code-version)

UI 组件和方法集类型的仓库属于可被引用的扩展插件，其版本发布需要执行一些对外公开声明的操作。借助此功能，我们能够标记出哪些组件、方法集、样式以及样式变量可供外部调用者使用，哪些仅作为内部资源在内部使用。

这里我们将按照功能来讲解各个功能的对外输出是如何标注的。

### 开放组件

在前端组件库项目里，若要将部分已开发完成的组件对外提供，方便使用者快速引用，就需在`项目配置`文件中进行相关选择，并对开放组件开展特色化配置。

![](/workbench/package-release.png)

平台会展示所有组件，我们只需从中挑选要对外公开的组件，并在最左侧勾选。勾选之后，在选中组件的右侧，会出现三个个性化的配置操作区域：

1. **配置组件简介**：在此处可详细说明组件，当开发人员引用该组件时，鼠标悬停便会弹出提示框，助力其深入了解组件特性。
2. **仅在快速添加展现**：开发人员可以通过该属性来配置组件是否是内部使用组件，内部使用组件：对外公开，但不支持独立使用，仅允许在固定组件的子集中存在，例如下拉框组件和下拉选项组件，其中下拉选项组件可以配置为“仅在快速添加中展示”，这样配置后该组件将不会在组件中心中展示，而只能在下拉框组件中通过快速添加“关联组件”进行添加
3. **组件图标 ICON**：平台支持对组件的 ICON 图标进行配置，且图标格式支持 SVG。我们能在[iconfont](https://www.iconfont.cn/)上复制 SVG 代码，再粘贴到组件图标编辑窗口，轻松完成对组件 ICON 的编辑。
   [video](/workbench/package-release2.mp4)
4. **配置组件封面**：可以为组件配置封面，配置后，该组件在组件中心将以大图形式展示，更便于开发人员挑选。
   ![](/workbench/package-release3.png)

一个组件的个性化数据来源映射关系：

| 个性化数据 | 来源                                       |
| ---------- | ------------------------------------------ |
| 组件名称   | 文件名称                                   |
| 组件标题   | 文件标题                                   |
| 组件 ICON  | `项目配置`文件中配置的 ICON                |
| 组件简介   | `项目配置`文件中配置的组件简介             |
| 组件封面   | `项目配置`文件中配置的组件封面             |
| 组件分组   | 通过对项目中实际文件的目录结构自动分析而来 |

### 开放方法集

无论是前端项目还是服务端类型的项目，在方法集类型的仓库（包括前端组件库类型项目），我们可以在`项目配置`文件中选择要对外公开的方法集。

![](/workbench/package-release4.png)

我们可以在这里选择要公开的方法集文件，并且在勾选后我们可以在右侧配置个性化信息：

1. 方法集默认 ICON：平台支持对组件的 ICON 图标进行配置，且图标格式支持 SVG。我们能在[iconfont](https://www.iconfont.cn/)上复制 SVG 代码，再粘贴到图标编辑窗口，轻松完成对组件 ICON 的编辑。复制教程可参考开放组件中的 ICON 复制视频教程。
2. 方法集默认背景色：允许我们为方法集配置默认的逻辑背景色。 不建议配置为浅色。
3. 方法集默认字体颜色：允许我们为方法集配置默认的逻辑字体颜色。默认为白色。

这些个性化的元素会影响我们在逻辑编排中的现实效果。
![](/workbench/package-release5.png)

##### 选择开放方法

刚才我们选择了对外开放的方法集，这只代表我们对外公开哪个方法集文件，但不代表方法集内的方法都会对外开放。

![](/workbench/package-release6.png)

我们可以在方法集中修改方法的`是否公开`属性来决定当前方法是对外公开还是内部使用的方法。

当我们选择公开后，我们可以在这里配置差异的特色化配置，包括方法集背景色、字体颜色。

若这里配置了背景色和字体色，则按照方法配置的个性数据执行，否则按照`项目配置`文件中的默认个性化数据执行。

### 开放样式名

在组件库项目里，若已提供默认样式代码，且搭配了常用的样式名用于快速配置数据，此时需在 `项目配置` 文件中创建样式名数据，并选择对外公开。

![](/workbench/package-release7.png)

在此处，我们能够勾选想要公开的样式名。一旦公开，这些样式名将为外部提供快捷样式数据。

> 样式使用方法可参考 [组件样式](/workbench/style)。

### 开放样式变量

当组件库项目中已具备默认样式代码，同时提供了常用的样式变量快速配置数据时，就需要在 `项目配置` 文件中创建样式变量值，并选择对外公开。

![](/workbench/package-release8.png)

在此，我们可以勾选要公开的样式变量。公开后的样式变量会对外提供快捷选择的数据。

> 样式使用方法可参考 [组件样式](/workbench/style)。
