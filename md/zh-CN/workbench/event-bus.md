## 事件总线

在这一章节，我们一同了解什么是事件总线，以及事件总线能够助力实现哪些功能。

**注意**：事件总线功能仅允许在`前端-项目`类型中使用。组件库、方法集库无法运用事件总线功能。

### 概述

在前端领域，组件与页面之间除了借助`props`参数进行数据通讯传递外，平台还提供了一种名为`事件总线`的数据通讯方式。在传统的`参数`与`事件`数据传递模式下，仅允许在存在引用关系的组件之间进行数据传递。当组件**不从属于**当前页面/组件时，便无法通过传递参数或者注册事件的方式实现数据传递。

若要在无引用关系的情况下达成组件或者页面之间的数据通讯，就需要用到我们的`事件总线`。事件总线类似于一种全局的事件管理器，它允许所有页面/组件/方法为其注册事件或者监听事件。

### 创建事件总线

首先，需在`项目配置`文件中打开**事件总线**面板。

![](/workbench/event-bus.png)

可点击页面中的**「创建事件总线」**按钮来创建一个事件总线。此处要留意，一个事件总线中能够声明多个事件，所以`事件总线`可理解为是某一类事件的集合，它能帮助我们按类别管理事件。

![](/workbench/event-bus1.png)

当创建完某一分类的事件总线后，即可对其进行事件定义。

![](/workbench/event-bus2.png)
![](/workbench/event-bus3.png)

在此处需定义事件名称，并且事件总线还允许设置事件参数类型。

### 如何使用

可在逻辑编排中通过`事件总线`逻辑节点开展操作。

![](/workbench/event-bus4.png)

拖入该节点后，需完成以下两步操作：

1. **选择事件**：平台提供了可视化选择操作，可在此选择要触发的事件。
2. **选择操作类型**：操作类型包含**监听事件**和**触发事件**。

当选择**触发事件**时，若当前事件约束了事件参数类型，需在此填写要传递的事件参数值。

![](/workbench/event-bus5.png)

若选择**监听事件**，则需维护事件触发时的处理回调函数。

![](/workbench/event-bus6.png)

> **特别注意**：对于`监听事件`操作，事件总线不会自动处理事件销毁方法。因此，我们需要定义一个接收值（Function），此方法即为**该事件的销毁**函数，需在`组件销毁`或者**合适的时机**触发此方法。
